# 六大原则.开闭原则

一个软件实体如类、模块和函数应该对扩展开放，对修改关闭
（即应该软件实体应该通过扩展来实现变化，而不是通过修改已有的代码来实现变化）。

#### 项目变化的类型：

1. 逻辑变化，只变化一个逻辑，不涉及其他模块，可以通过修改原有类中的方法完成；

2. 子模块变化，一个模块变化，会对其他模块产生影响，
特别是一个低层次的模块变化必然引起高模块的变化；

3. 可见试图变化，一般会引起连锁反应，可能只是业务的耦合变化，也可能复杂的令你头大。

#### 开闭原则的重要性：

1. 对测试的影响，节省对原有模块的测试开销，仅需对扩展模块进行测试；

注：一个方法的测试方法一般不少于3种：正常的业务逻辑、边界条件、异常条件。

2. 提高复用性，通过原子逻辑来组成业务逻辑，避免相同的逻辑分布在多个角落；

3. 提高可维护性，扩展往往比修改源代码轻松；

4. 面向对象开发的要求，万物皆对象，我们需要把所有的事物都抽象成对象，然后针对对象进行操作，
但是万物皆运动，有运动就有变化，有变化就要有策略去应对，怎么快速应对呢？
这就需要在设计之初考虑到所有可能变化的因素，然后留下接口，等待“可能”转变为“现实”。。

#### 开闭原则的使用：

1. 抽象约束，通过接口或抽象类可以约束一组可能变化的行为，并且能够实现对扩展开放，其包含三层含义：

 - 第一，通过接口或抽象类约束扩展，对扩展进行边界限定，不允许出现在接口或抽象类中不存在的public方法；

 - 第二，参数类型、引用对象尽量使用接口或者抽象类，而不是实现类；

 - 第三，抽象层尽量保持稳定，一旦确定即不允许修改。；

2. 元数据控制模块行为（参考控制反转的实现）；

3. 制定项目章程；

4. 封装变化，对变化的封装包含两层含义：

- 第一，将相同的变化封装到一个接口或抽象类中；

- 第二，将不同的变化封装到不同的接口或抽象类中，不应该有两个不同的变化出现在同一个接口或抽象类中。。

#### 对于开闭原则的建议：

1. 开闭原则也只是一个原则；

2. 项目规章很重要；

3. 预知变化。